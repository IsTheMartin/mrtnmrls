---
import "@styles/global.css";
import { getCollection } from "astro:content";
import FormattedDate from "./FormattedDate.astro";

interface Props {
	lang: String;
}

const { lang } = Astro.props;

const posts = await getCollection("posts", ({ data }) => {
    return data.lang == lang;
});
posts.sort((a, b) => Date.parse(b.data.pubDate.toString()) - Date.parse(a.data.pubDate.toString()));
---

<nav>
    {
        posts.map((post) => (
            <a href={`/${post.slug}`}>
                <p>{post.data.title}</p>
                <hr />
                <span>
                    <FormattedDate
                        date={post.data.pubDate}
                        lang={post.data.lang}
                    />
                </span>
            </a>
        ))
    }
</nav>
